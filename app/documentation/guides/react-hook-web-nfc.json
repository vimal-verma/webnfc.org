{
    "slug": "react-hook-web-nfc",
    "title": "Building a Custom Web NFC React Hook",
    "description": "Learn how to encapsulate Web NFC logic into a reusable React hook for cleaner components and better state management.",
    "content": "<h3>Introduction</h3><p>Managing Web NFC state (scanning, writing, errors, support) directly in your components can lead to messy code. Creating a custom React hook allows you to encapsulate this logic and reuse it across your application.</p><h3>The useNfc Hook</h3><p>Here is a simple implementation of a <code>useNfc</code> hook that handles reading tags.</p><pre><code class=\"language-js\">import { useState, useEffect, useCallback } from 'react';\n\nexport function useNfc() {\n  const [isSupported, setIsSupported] = useState(false);\n  const [isScanning, setIsScanning] = useState(false);\n  const [message, setMessage] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if ('NDEFReader' in window) {\n      setIsSupported(true);\n    }\n  }, []);\n\n  const scan = useCallback(async () => {\n    if (!isSupported) return;\n\n    try {\n      const ndef = new window.NDEFReader();\n      await ndef.scan();\n      setIsScanning(true);\n      setError(null);\n\n      ndef.onreading = (event) => {\n        setMessage(event.message);\n      };\n\n      ndef.onreadingerror = () => {\n        setError('Error reading tag.');\n      };\n    } catch (err) {\n      setError(err.message);\n      setIsScanning(false);\n    }\n  }, [isSupported]);\n\n  return { isSupported, isScanning, message, error, scan };\n}</code></pre><h3>Usage</h3><p>You can now use this hook in any component:</p><pre><code class=\"language-jsx\">export default function NfcReader() {\n  const { isSupported, isScanning, message, scan, error } = useNfc();\n\n  if (!isSupported) {\n    return &lt;p&gt;Web NFC is not supported.&lt;/p&gt;;\n  }\n\n  return (\n    &lt;div&gt;\n      &lt;button onClick={scan} disabled={isScanning}&gt;\n        {isScanning ? 'Scanning...' : 'Start Scan'}\n      &lt;/button&gt;\n\n      {error && &lt;p&gt;Error: {error}&lt;/p&gt;}\n\n      {message && &lt;p&gt;Tag detected!&lt;/p&gt;}\n    &lt;/div&gt;\n  );\n}</code></pre>"
}